let buhImg=document.getElementById("buh"),buh="../assets/misc/buh.webp",buhFlip="../assets/misc/buhFlip.webp",buhFlipExplode="../assets/misc/buhFlipExplode.webp",canClick=!0;function enableClicksAfterDelay(){setTimeout(()=>{canClick=!0},3e3)}function playGif(e,t){if(!canClick)return;canClick=!1;let o=(new Date).getTime();buhImg.src=e+"?t="+o,setTimeout(()=>{buhImg.src=buh+"?t="+(o+t),enableClicksAfterDelay()},t)}var currNumberFormat;buhImg.addEventListener("click",()=>{playGif(buhFlip,2970)}),buhImg.addEventListener("contextmenu",e=>{e.preventDefault(),playGif(buhFlipExplode,2480)});let leaksToggle=document.getElementById("lks"),spoilersToggle=document.getElementById("spl"),menuIsOpen=!1;function loadHomePage(){loadSavedState(),updateNumberFormat()}function loadSavedState(){currNumberFormat=localStorage.getItem("numberFormat")||"period","true"==localStorage.getItem("leaksEnabled")&&(leaksToggle.checked=!0),"true"==localStorage.getItem("spoilersEnabled")&&(spoilersToggle.checked=!0)}function saveProgress(){localStorage.setItem("numberFormat",currNumberFormat),localStorage.setItem("leaksEnabled",leaksToggle.checked),localStorage.setItem("spoilersEnabled",spoilersToggle.checked)}function toggleMenu(){let e=document.getElementById("mb"),t=document.getElementById("mb-o"),o=document.getElementById("open-mb-btn");menuIsOpen?(document.body.classList.remove("no-scroll"),e.style.display="none",t.style.display="none",o.style.display="none"):(document.body.classList.add("no-scroll"),e.style.display="block",t.style.display="block",o.style.display="block"),menuIsOpen=!menuIsOpen}function updateNumberFormat(e){e&&(currNumberFormat=e.dataset.format);let t=document.getElementById("ex-num"),o=document.querySelectorAll(".nfb");t.innerHTML=numberFormat(2222222),o.forEach(e=>e.classList.toggle("selected",e.dataset.format==currNumberFormat)),saveProgress()}function numberFormat(e){return"comma"==currNumberFormat?e.toLocaleString("en-US"):"period"==currNumberFormat?e.toLocaleString("de-DE"):e}document.addEventListener("keydown",e=>{e.stopPropagation(),"Escape"==e.key?(e.preventDefault,toggleMenu()):" "==e.key&&e.preventDefault()}),leaksToggle.addEventListener("change",()=>{leaksToggle.checked||(spoilersToggle.checked=!1,versionNum>cntNoLeaks&&(versionNum=cntNoLeaks)),saveProgress()}),spoilersToggle.addEventListener("change",()=>{spoilersToggle.checked&&(leaksToggle.checked=!0),saveProgress()}),window.addEventListener("DOMContentLoaded",async()=>{loadHomePage()});